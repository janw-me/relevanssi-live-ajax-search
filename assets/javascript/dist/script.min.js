!function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)},s={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},t=function(){function t(t){void 0===t&&(t={}),this.opts=e(e({},s),t)}return t.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),i(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,s){var t=Math.round(s.corners*s.width*500)/1e3+"px",a="none";!0===s.shadow?a="0 2px 4px #000":"string"==typeof s.shadow&&(a=s.shadow);for(var o=function(e){for(var s=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,t=[],i=0,r=e.split(",");i<r.length;i++){var n=r[i].match(s);if(null!==n){var a=+n[2],o=+n[5],l=n[4],u=n[7];0!==a||l||(l=u),0!==o||u||(u=l),l===u&&t.push({prefix:n[1]||"",x:a,y:o,xUnits:l,yUnits:u,end:n[8]})}}return t}(a),l=0;l<s.lines;l++){var u=~~(360/s.lines*l+s.rotate),h=i(document.createElement("div"),{position:"absolute",top:-s.width/2+"px",width:s.length+s.width+"px",height:s.width+"px",background:r(s.fadeColor,l),borderRadius:t,transformOrigin:"left",transform:"rotate("+u+"deg) translateX("+s.radius+"px)"}),d=l*s.direction/s.lines/s.speed;d-=1/s.speed;var c=i(document.createElement("div"),{width:"100%",height:"100%",background:r(s.color,l),borderRadius:t,boxShadow:n(o,u),animation:1/s.speed+"s linear "+d+"s infinite "+s.animation});h.appendChild(c),e.appendChild(h)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}();function i(e,s){for(var t in s)e.style[t]=s[t];return e}function r(e,s){return"string"==typeof e?e:e[s%e.length]}function n(e,s){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i],o=a(n.x,n.y,s);t.push(n.prefix+o[0]+n.xUnits+" "+o[1]+n.yUnits+n.end)}return t.join(", ")}function a(e,s,t){var i=t*Math.PI/180,r=Math.sin(i),n=Math.cos(i);return[Math.round(1e3*(e*n+s*r))/1e3,Math.round(1e3*(-e*r+s*n))/1e3]}!function(){var e="relevanssi_live_search";function s(e){this.config=null,this.input_el=e,this.results_id=null,this.results_el=null,this.parent_el=null,this.results_showing=!1,this.form_el=null,this.timer=!1,this.last_string="",this.spinner=null,this.spinner_showing=!1,this.has_results=!1,this.current_request=!1,this.results_destroy_on_blur=!0,this.a11y_keys=[27,40,13,38,9],this.init()}s.prototype={init:function(){var e=this,s=this.input_el;this.form_el=s.parents("form:eq(0)"),this.results_id=this.uniqid("relevanssi_live_search_results_");var i=!1,r=s.data("rlvconfig");if(r&&void 0!==r)for(var n in relevanssi_live_search_params.config)r===n&&(i=!0,this.config=relevanssi_live_search_params.config[n]);else for(var a in relevanssi_live_search_params.config)"default"===a&&(i=!0,this.config=relevanssi_live_search_params.config[a]);if(i){s.attr("autocomplete","off"),s.attr("aria-owns",this.results_id),s.attr("aria-autocomplete","both"),s.attr("aria-label",relevanssi_live_search_params.aria_instructions);var o='<div aria-expanded="false" class="relevanssi-live-search-results" id="'+this.results_id+'" role="listbox" tabindex="0"></div>',l=s.data("rlvparentel");l?(this.parent_el=jQuery(l),this.parent_el.html(o)):this.config.parent_el?(this.parent_el=jQuery(this.config.parent_el),this.parent_el.html(o)):jQuery("body").append(jQuery(o)),this.results_el=jQuery("#"+this.results_id),this.position_results(),jQuery(window).resize((function(){e.position_results()})),this.config.spinner&&(void 0===this.config.spinner.scale&&(this.config.spinner.scale=1),void 0===this.config.spinner.fadeColor&&(this.config.spinner.fadeColor="transparent"),void 0===this.config.spinner.animation&&(this.config.spinner.animation="relevanssi-spinner-line-fade-quick"),void 0===this.config.spinner.position&&(this.config.spinner.position="absolute"),this.spinner=new t(this.config.spinner)),void 0===this.config.abort_on_enter&&(this.config.abort_on_enter=!0),s.keyup((function(s){jQuery.inArray(s.keyCode,e.a11y_keys)>-1||(e.current_request&&e.config.abort_on_enter&&13===s.keyCode&&e.current_request.abort(),jQuery.trim(e.input_el.val()).length?e.results_showing||(e.position_results(),e.results_el.addClass("relevanssi-live-search-results-showing"),e.show_spinner(),e.results_showing=!0):e.destroy_results(),e.has_results&&!e.spinner_showing&&e.last_string!==jQuery.trim(e.input_el.val())&&(e.results_el.empty(),e.show_spinner()),s.currentTarget.value.length>=e.config.input.min_chars?e.results_el.removeClass("relevanssi-live-search-no-min-chars"):e.results_el.addClass("relevanssi-live-search-no-min-chars"))})).keyup(jQuery.proxy(this.maybe_search,this)),(this.config.results_destroy_on_blur||void 0===this.config.results_destroy_on_blur)&&jQuery("html").click((function(s){jQuery(s.target).parents(".relevanssi-live-search-results").length||e.destroy_results()})),s.click((function(e){e.stopPropagation()}))}else alert(relevanssi_live_search_params.msg_no_config_found)},keyboard_navigation:function(){var e=this,s=this.input_el,t=this.results_el,i="relevanssi-live-search-result--focused",r=".relevanssi-live-search-result",n=this.a11y_keys;jQuery(document).off("keyup.relevanssi_a11y").on("keyup.relevanssi_a11y",(function(a){if(t.hasClass("relevanssi-live-search-results-showing")){if(-1!==jQuery.inArray(a.keyCode,n)){if(a.preventDefault(),27===a.keyCode&&!s.is(":focus"))return e.destroy_results(),jQuery(document).off("keyup.relevanssi_a11y"),s.focus(),void jQuery(document).trigger("relevanssi_live_escape_results");if(40===a.keyCode){var o=jQuery(t[0]).find("."+i);1===o.length&&1===o.next().length?o.removeClass(i).attr("aria-selected","false").next().addClass(i).attr("aria-selected","true").find("a").focus():(o.removeClass(i).attr("aria-selected","false"),t.find(r+":first").addClass(i).attr("aria-selected","true").find("a").focus()),jQuery(document).trigger("relevanssi_live_key_arrowdown_pressed")}if(38===a.keyCode){var l=jQuery(t[0]).find("."+i);1===l.length&&1===l.prev().length?l.removeClass(i).attr("aria-selected","false").prev().addClass(i).attr("aria-selected","true").find("a").focus():(l.removeClass(i).attr("aria-selected","false"),t.find(r+":last").addClass(i).attr("aria-selected","true").find("a").focus()),jQuery(document).trigger("relevanssi_live_key_arrowup_pressed")}13===a.keyCode&&jQuery(document).trigger("relevanssi_live_key_enter_pressed"),9===a.keyCode&&jQuery(document).trigger("relevanssi_live_key_tab_pressed")}}else jQuery(document).off("keyup.relevanssi_a11y")})),jQuery(document).trigger("relevanssi_live_keyboad_navigation")},aria_expanded:function(e){var s=this.results_el;e?s.attr("aria-expanded","true"):s.attr("aria-expanded","false"),jQuery(document).trigger("relevanssi_live_aria_expanded")},position_results:function(){var e=this.input_el,s=e.offset(),t=this.results_el,i=0;if(!e.is(":hidden")){switch(s.left+=parseInt(this.config.results.offset.x,10),s.top+=parseInt(this.config.results.offset.y,10),this.config.results.position){case"top":i=0-t.height();break;default:i=e.outerHeight()}t.css("left",s.left),t.css("top",s.top+i+"px"),"auto"===this.config.results.width&&t.width(e.outerWidth()-parseInt(t.css("paddingRight").replace("px",""),10)-parseInt(t.css("paddingLeft").replace("px",""),10)),jQuery(document).trigger("relevanssi_live_position_results",[t.css("left"),t.css("top"),t.width()])}},destroy_results:function(e){this.hide_spinner(),this.aria_expanded(!1),this.results_el.empty().removeClass("relevanssi-live-search-results-showing"),this.results_showing=!1,this.has_results=!1,jQuery(document).trigger("relevanssi_live_destroy_results")},maybe_search:function(e){jQuery.inArray(e.keyCode,this.a11y_keys)>-1||(clearTimeout(this.timer),e.currentTarget.value.length>=this.config.input.min_chars&&(this.current_request&&this.current_request.abort(),this.timer=setTimeout(jQuery.proxy(this.search,this,e),this.config.input.delay)))},show_spinner:function(){this.config.spinner&&!this.spinner_showing&&(this.spinner.spin(document.getElementById(this.results_id)),this.spinner_showing=!0,jQuery(document).trigger("relevanssi_live_show_spinner"))},hide_spinner:function(){this.config.spinner&&(this.spinner.stop(),this.spinner_showing=!1,jQuery(document).trigger("relevanssi_live_hide_spinner"))},search:function(e){var s=this,t=this.form_el,i=t.serialize(),r=t.attr("action")?t.attr("action"):"",n=this.input_el,a=this.results_el;jQuery(document).trigger("relevanssi_live_search_start",[n,a,t,r,i]),this.aria_expanded(!1),i+="&action=relevanssi_live_search&rlvquery="+encodeURIComponent(n.val())+"&origin_id="+parseInt(relevanssi_live_search_params.origin_id,10),-1!==r.indexOf("?")&&(r=r.split("?"),i+="&"+r[1]),this.last_string=n.val(),this.has_results=!0,this.current_request=jQuery.ajax({url:relevanssi_live_search_params.ajaxurl,type:"POST",data:i,complete:function(){jQuery(document).trigger("relevanssi_live_search_complete",[n,a,t,r,i]),s.spinner_showing=!1,s.hide_spinner(),this.current_request=!1,jQuery(document).trigger("relevanssi_live_search_shutdown",[n,a,t,r,i])},success:function(e){0===e&&(e=""),jQuery(document).trigger("relevanssi_live_search_success",[n,a,t,r,i]),s.position_results(),a.html(e),s.aria_expanded(!0),s.keyboard_navigation(),jQuery(document).trigger("relevanssi_live_search_shutdown",[n,a,t,r,i])}})},uniqid:function(e,s){var t;void 0===e&&(e="");var i=function(e,s){return s<(e=parseInt(e,10).toString(16)).length?e.slice(e.length-s):s>e.length?new Array(s-e.length+1).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,t=e,t+=i(parseInt((new Date).getTime()/1e3,10),8),t+=i(this.php_js.uniqidSeed,5),s&&(t+=(10*Math.random()).toFixed(8).toString()),t}},jQuery.fn[e]=function(t){return this.each((function(){jQuery.data(this,"plugin_"+e)||jQuery.data(this,"plugin_"+e,new s(jQuery(this),t))})),this}}(),jQuery(document).ready((function(){"function"==typeof jQuery().relevanssi_live_search&&jQuery('input[data-rlvlive="true"]').relevanssi_live_search()}))}();
